<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-aiylphlt"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>agent-native-architecture | Systematic</title><link rel="canonical" href="https://fro.bot/systematic/reference/skills/agent-native-architecture/"/><link rel="sitemap" href="/systematic/sitemap-index.xml"/><link rel="shortcut icon" href="/systematic/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.17.1"/><meta name="generator" content="Starlight v0.37.6"/><meta property="og:title" content="agent-native-architecture"/><meta property="og:type" content="article"/><meta property="og:url" content="https://fro.bot/systematic/reference/skills/agent-native-architecture/"/><meta property="og:locale" content="en"/><meta property="og:description" content="Build applications where agents are first-class citizens. Use this skill when designing autonomous agents, creating MCP tools, implementing self-modifying systems, or building apps where features are outcomes achieved by agents operating in a loop."/><meta property="og:site_name" content="Systematic"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="Build applications where agents are first-class citizens. Use this skill when designing autonomous agents, creating MCP tools, implementing self-modifying systems, or building apps where features are outcomes achieved by agents operating in a loop."/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/systematic/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/systematic/_astro/index.CaJzVaqO.css">
<style>@layer starlight.components{:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-r6rcksuz){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-r6rcksuz){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-r6rcksuz){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-r6rcksuz){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-r6rcksuz){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-r6rcksuz){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-r6rcksuz){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-r6rcksuz){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-r6rcksuz){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-r6rcksuz){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-r6rcksuz){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-r6rcksuz){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-r6rcksuz){vertical-align:middle}}
@layer starlight.components{.card:where(.astro-3nstnhqj){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-3nstnhqj):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-3nstnhqj):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-3nstnhqj):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-3nstnhqj):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-3nstnhqj){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-3nstnhqj) .icon:where(.astro-3nstnhqj){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem;flex-shrink:0}.card:where(.astro-3nstnhqj) .body:where(.astro-3nstnhqj){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}}
@layer starlight.components{.card-grid:where(.astro-egg2xge6){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-egg2xge6)>*{margin-top:0!important}@media(min-width:50rem){.card-grid:where(.astro-egg2xge6){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-egg2xge6){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-egg2xge6)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}}
@layer starlight.components{svg:where(.astro-alwspyvt){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}}
@layer starlight.components{.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}}@layer starlight.content{.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}}
@layer starlight.components{.sl-link-button:where(.astro-dsyae72l){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-dsyae72l).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-dsyae72l).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-dsyae72l).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-dsyae72l).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-dsyae72l) svg{flex-shrink:0}@media(min-width:50rem){.sl-link-button:where(.astro-dsyae72l){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-dsyae72l){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-dsyae72l):not(:where(p *)){margin-block:1rem}}
</style><script type="module" src="/systematic/_astro/page.B1D-nYk3.js"></script></head> <body class="astro-aiylphlt"> <a href="#_top" class="astro-tdghjyio">Skip to content</a>  <div class="page sl-flex astro-r6lv7f2i"> <header class="header astro-r6lv7f2i"><div class="header astro-h2pe5waf"> <div class="title-wrapper sl-flex astro-h2pe5waf"> <a href="/systematic/" class="site-title sl-flex astro-hvbo5tpp">  <span class="astro-hvbo5tpp" translate="no"> Systematic </span> </a>  </div> <div class="sl-flex print:hidden astro-h2pe5waf"> <site-search class="astro-h2pe5waf astro-yuytr44a" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-yuytr44a"> <svg aria-hidden="true" class="astro-yuytr44a astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-yuytr44a" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-yuytr44a" style="display: none;"> <kbd class="astro-yuytr44a">Ctrl</kbd><kbd class="astro-yuytr44a">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-yuytr44a"> <div class="dialog-frame sl-flex astro-yuytr44a">  <button data-close-modal class="sl-flex md:sl-hidden astro-yuytr44a"> Cancel </button> <div class="search-container astro-yuytr44a"> <div id="starlight__search" class="astro-yuytr44a"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/systematic/_astro/Search.astro_astro_type_script_index_0_lang.BjGSYz_B.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-h2pe5waf"> <div class="sl-flex social-icons astro-h2pe5waf"> <a href="https://github.com/marcusrbrown/systematic" rel="me" class="sl-flex astro-slnfz65f"><span class="sr-only astro-slnfz65f">GitHub</span><svg aria-hidden="true" class="astro-slnfz65f astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-afb54k27"> <span class="sr-only astro-afb54k27">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-afb54k27 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-afb54k27"> <option value="dark" class="astro-afb54k27">Dark</option><option value="light" class="astro-afb54k27">Light</option><option value="auto" selected class="astro-afb54k27">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-afb54k27 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar print:hidden astro-r6lv7f2i" aria-label="Main"> <starlight-menu-button class="print:hidden astro-qa7beyh5"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-qa7beyh5"> <svg aria-hidden="true" class="open-menu astro-qa7beyh5 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg> <svg aria-hidden="true" class="close-menu astro-qa7beyh5 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg> </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-r6lv7f2i"> <div class="sidebar-content sl-flex astro-r6lv7f2i"> <sl-sidebar-state-persist data-hash="12qxbnm" class="astro-jppm6ggu"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-2v7xa3ze"> <li class="astro-2v7xa3ze"> <details open class="astro-2v7xa3ze"> <summary class="astro-2v7xa3ze"> <span class="group-label astro-2v7xa3ze"> <span class="large astro-2v7xa3ze">Getting Started</span>  </span> <svg aria-hidden="true" class="caret astro-2v7xa3ze astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <ul class="astro-2v7xa3ze"> <li class="astro-2v7xa3ze"> <a href="/systematic/getting-started/installation/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Installation</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/getting-started/configuration/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Configuration</span>  </a> </li> </ul>  </details> </li><li class="astro-2v7xa3ze"> <details open class="astro-2v7xa3ze"> <summary class="astro-2v7xa3ze"> <span class="group-label astro-2v7xa3ze"> <span class="large astro-2v7xa3ze">Guides</span>  </span> <svg aria-hidden="true" class="caret astro-2v7xa3ze astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <ul class="astro-2v7xa3ze"> <li class="astro-2v7xa3ze"> <a href="/systematic/guides/architecture/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Architecture</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/guides/conversion-guide/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Conversion Guide</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/guides/creating-skills/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Creating Custom Skills</span>  </a> </li> </ul>  </details> </li><li class="astro-2v7xa3ze"> <details open class="astro-2v7xa3ze"> <summary class="astro-2v7xa3ze"> <span class="group-label astro-2v7xa3ze"> <span class="large astro-2v7xa3ze">Reference</span>  </span> <svg aria-hidden="true" class="caret astro-2v7xa3ze astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <ul class="astro-2v7xa3ze"> <li class="astro-2v7xa3ze"> <details open class="astro-2v7xa3ze"> <summary class="astro-2v7xa3ze"> <span class="group-label astro-2v7xa3ze"> <span class="large astro-2v7xa3ze">Skills</span>  </span> <svg aria-hidden="true" class="caret astro-2v7xa3ze astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <ul class="astro-2v7xa3ze"> <li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Skills Reference</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/agent-browser/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">agent-browser</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/agent-native-architecture/" aria-current="page" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">agent-native-architecture</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/brainstorming/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">brainstorming</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/compound-docs/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">compound-docs</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/creating-agent-skills/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">creating-agent-skills</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/file-todos/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">file-todos</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/git-worktree/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">git-worktree</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/skills/using-systematic/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">using-systematic</span>  </a> </li> </ul>  </details> </li><li class="astro-2v7xa3ze"> <details open class="astro-2v7xa3ze"> <summary class="astro-2v7xa3ze"> <span class="group-label astro-2v7xa3ze"> <span class="large astro-2v7xa3ze">Agents</span>  </span> <svg aria-hidden="true" class="caret astro-2v7xa3ze astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <ul class="astro-2v7xa3ze"> <li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Agents Reference</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/architecture-strategist/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">architecture-strategist</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/best-practices-researcher/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">best-practices-researcher</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/bug-reproduction-validator/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">bug-reproduction-validator</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/code-simplicity-reviewer/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">code-simplicity-reviewer</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/design-implementation-reviewer/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">design-implementation-reviewer</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/design-iterator/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">design-iterator</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/framework-docs-researcher/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">framework-docs-researcher</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/pattern-recognition-specialist/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">pattern-recognition-specialist</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/performance-oracle/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">performance-oracle</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/security-sentinel/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">security-sentinel</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/agents/spec-flow-analyzer/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">spec-flow-analyzer</span>  </a> </li> </ul>  </details> </li><li class="astro-2v7xa3ze"> <details open class="astro-2v7xa3ze"> <summary class="astro-2v7xa3ze"> <span class="group-label astro-2v7xa3ze"> <span class="large astro-2v7xa3ze">Commands</span>  </span> <svg aria-hidden="true" class="caret astro-2v7xa3ze astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="5"></sl-sidebar-restore> <ul class="astro-2v7xa3ze"> <li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">Commands Reference</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/agent-native-audit/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">agent-native-audit</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/create-agent-skill/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">create-agent-skill</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/deepen-plan/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">deepen-plan</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/lfg/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">lfg</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/workflows-brainstorm/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">workflows:brainstorm</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/workflows-compound/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">workflows:compound</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/workflows-plan/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">workflows:plan</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/workflows-review/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">workflows:review</span>  </a> </li><li class="astro-2v7xa3ze"> <a href="/systematic/reference/commands/workflows-work/" class="astro-2v7xa3ze"> <span class="astro-2v7xa3ze">workflows:work</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-evq6jdvn"> <div class="social-icons astro-evq6jdvn"> <a href="https://github.com/marcusrbrown/systematic" rel="me" class="sl-flex astro-slnfz65f"><span class="sr-only astro-slnfz65f">GitHub</span><svg aria-hidden="true" class="astro-slnfz65f astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-afb54k27"> <span class="sr-only astro-afb54k27">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-afb54k27 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-afb54k27"> <option value="dark" class="astro-afb54k27">Dark</option><option value="light" class="astro-afb54k27">Light</option><option value="auto" selected class="astro-afb54k27">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-afb54k27 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-r6lv7f2i">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-5o6snv62"> <aside class="right-sidebar-container print:hidden astro-5o6snv62"> <div class="right-sidebar astro-5o6snv62"> <script type="module" src="/systematic/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.hwBsy0Mo.js"></script><script type="module" src="/systematic/_astro/TableOfContents.astro_astro_type_script_index_0_lang.FuRcXuRY.js"></script><div class="lg:sl-hidden astro-dnoxkmvf"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-mqifc7lk"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-mqifc7lk"><details id="starlight__mobile-toc" class="astro-mqifc7lk"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-mqifc7lk"><span class="toggle sl-flex astro-mqifc7lk">On this page<svg aria-hidden="true" class="caret astro-mqifc7lk astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></span><span class="display-current astro-mqifc7lk"></span></summary><div class="dropdown astro-mqifc7lk"><ul class="isMobile astro-tqutraay" style="--depth: 0;"> <li class="astro-tqutraay" style="--depth: 0;"> <a href="#_top" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#why-now" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Why Now</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#core-principles" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Core Principles</span> </a> <ul class="isMobile astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#1-parity" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">1. Parity</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#2-granularity" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">2. Granularity</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#3-composability" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">3. Composability</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#4-emergent-capability" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">4. Emergent Capability</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#5-improvement-over-time" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">5. Improvement Over Time</span> </a>  </li> </ul>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#architecture-review-checklist" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Architecture Review Checklist</span> </a> <ul class="isMobile astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#core-principles-1" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Core Principles</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#tool-design" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Tool Design</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#files--workspace" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Files &amp; Workspace</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#agent-execution" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Agent Execution</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#context-injection" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Context Injection</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#ui-integration" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">UI Integration</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#mobile-if-applicable" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Mobile (if applicable)</span> </a>  </li> </ul>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#quick-start-build-an-agent-native-feature" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Quick Start: Build an Agent-Native Feature</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#reference-files" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Reference Files</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#anti-patterns" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Anti-Patterns</span> </a> <ul class="isMobile astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#common-approaches-that-arent-fully-agent-native" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Common Approaches That Aren’t Fully Agent-Native</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#specific-anti-patterns" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Specific Anti-Patterns</span> </a>  </li> </ul>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#success-criteria" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Success Criteria</span> </a> <ul class="isMobile astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#architecture" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Architecture</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#implementation" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Implementation</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#product" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Product</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#mobile-if-applicable-1" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Mobile (if applicable)</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#the-ultimate-test" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">The Ultimate Test</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-dnoxkmvf"><div class="sl-container astro-dnoxkmvf"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-tqutraay" style="--depth: 0;"> <li class="astro-tqutraay" style="--depth: 0;"> <a href="#_top" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#why-now" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Why Now</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#core-principles" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Core Principles</span> </a> <ul class="astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#1-parity" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">1. Parity</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#2-granularity" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">2. Granularity</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#3-composability" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">3. Composability</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#4-emergent-capability" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">4. Emergent Capability</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#5-improvement-over-time" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">5. Improvement Over Time</span> </a>  </li> </ul>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#architecture-review-checklist" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Architecture Review Checklist</span> </a> <ul class="astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#core-principles-1" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Core Principles</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#tool-design" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Tool Design</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#files--workspace" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Files &amp; Workspace</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#agent-execution" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Agent Execution</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#context-injection" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Context Injection</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#ui-integration" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">UI Integration</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#mobile-if-applicable" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Mobile (if applicable)</span> </a>  </li> </ul>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#quick-start-build-an-agent-native-feature" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Quick Start: Build an Agent-Native Feature</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#reference-files" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Reference Files</span> </a>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#anti-patterns" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Anti-Patterns</span> </a> <ul class="astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#common-approaches-that-arent-fully-agent-native" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Common Approaches That Aren’t Fully Agent-Native</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#specific-anti-patterns" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Specific Anti-Patterns</span> </a>  </li> </ul>  </li><li class="astro-tqutraay" style="--depth: 0;"> <a href="#success-criteria" class="astro-tqutraay" style="--depth: 0;"> <span class="astro-tqutraay" style="--depth: 0;">Success Criteria</span> </a> <ul class="astro-tqutraay" style="--depth: 1;"> <li class="astro-tqutraay" style="--depth: 1;"> <a href="#architecture" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Architecture</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#implementation" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Implementation</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#product" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Product</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#mobile-if-applicable-1" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">Mobile (if applicable)</span> </a>  </li><li class="astro-tqutraay" style="--depth: 1;"> <a href="#the-ultimate-test" class="astro-tqutraay" style="--depth: 1;"> <span class="astro-tqutraay" style="--depth: 1;">The Ultimate Test</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-5o6snv62">  <main data-pagefind-body class="astro-aiylphlt" lang="en" dir="ltr">    <div class="content-panel astro-yu6egeco"> <div class="sl-container astro-yu6egeco"> <h1 id="_top" class="astro-ty5wsixp">agent-native-architecture</h1>  </div> </div>  <div class="content-panel astro-yu6egeco"> <div class="sl-container astro-yu6egeco"> <div class="sl-markdown-content"> <p>&#x3C;why_now></p>
<div class="sl-heading-wrapper level-h2"><h2 id="why-now">Why Now</h2><a class="sl-anchor-link" href="#why-now"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Why Now”</span></a></div>
<p>Software agents work reliably now. Claude Code demonstrated that an LLM with access to bash and file tools, operating in a loop until an objective is achieved, can accomplish complex multi-step tasks autonomously.</p>
<p>The surprising discovery: <strong>a really good coding agent is actually a really good general-purpose agent.</strong> The same architecture that lets Claude Code refactor a codebase can let an agent organize your files, manage your reading list, or automate your workflows.</p>
<p>The Claude Code SDK makes this accessible. You can build applications where features aren’t code you write—they’re outcomes you describe, achieved by an agent with tools, operating in a loop until the outcome is reached.</p>
<p>This opens up a new field: software that works the way Claude Code works, applied to categories far beyond coding.
&#x3C;/why_now></p>
<p>&#x3C;core_principles></p>
<div class="sl-heading-wrapper level-h2"><h2 id="core-principles">Core Principles</h2><a class="sl-anchor-link" href="#core-principles"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Core Principles”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-parity">1. Parity</h3><a class="sl-anchor-link" href="#1-parity"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “1. Parity”</span></a></div>
<p><strong>Whatever the user can do through the UI, the agent should be able to achieve through tools.</strong></p>
<p>This is the foundational principle. Without it, nothing else matters.</p>
<p>Imagine you build a notes app with a beautiful interface for creating, organizing, and tagging notes. A user asks the agent: “Create a note summarizing my meeting and tag it as urgent.”</p>
<p>If you built UI for creating notes but no agent capability to do the same, the agent is stuck. It might apologize or ask clarifying questions, but it can’t help—even though the action is trivial for a human using the interface.</p>
<p><strong>The fix:</strong> Ensure the agent has tools (or combinations of tools) that can accomplish anything the UI can do.</p>
<p>This isn’t about creating a 1:1 mapping of UI buttons to tools. It’s about ensuring the agent can <strong>achieve the same outcomes</strong>. Sometimes that’s a single tool (<code dir="auto">create_note</code>). Sometimes it’s composing primitives (<code dir="auto">write_file</code> to a notes directory with proper formatting).</p>
<p><strong>The discipline:</strong> When adding any UI capability, ask: can the agent achieve this outcome? If not, add the necessary tools or primitives.</p>
<p>A capability map helps:</p>

























<table><thead><tr><th>User Action</th><th>How Agent Achieves It</th></tr></thead><tbody><tr><td>Create a note</td><td><code dir="auto">write_file</code> to notes directory, or <code dir="auto">create_note</code> tool</td></tr><tr><td>Tag a note as urgent</td><td><code dir="auto">update_file</code> metadata, or <code dir="auto">tag_note</code> tool</td></tr><tr><td>Search notes</td><td><code dir="auto">search_files</code> or <code dir="auto">search_notes</code> tool</td></tr><tr><td>Delete a note</td><td><code dir="auto">delete_file</code> or <code dir="auto">delete_note</code> tool</td></tr></tbody></table>
<p><strong>The test:</strong> Pick any action a user can take in your UI. Describe it to the agent. Can it accomplish the outcome?</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="2-granularity">2. Granularity</h3><a class="sl-anchor-link" href="#2-granularity"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “2. Granularity”</span></a></div>
<p><strong>Prefer atomic primitives. Features are outcomes achieved by an agent operating in a loop.</strong></p>
<p>A tool is a primitive capability: read a file, write a file, run a bash command, store a record, send a notification.</p>
<p>A <strong>feature</strong> is not a function you write. It’s an outcome you describe in a prompt, achieved by an agent that has tools and operates in a loop until the outcome is reached.</p>
<p><strong>Less granular (limits the agent):</strong></p>
<div class="expressive-code"><link rel="stylesheet" href="/systematic/_astro/ec.v4551.css"><script type="module" src="/systematic/_astro/ec.0vx5m.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Tool: classify_and_organize_files(files)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">→ You wrote the decision logic</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">→ Agent executes your code</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">→ To change behavior, you refactor</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="Tool: classify_and_organize_files(files)→ You wrote the decision logic→ Agent executes your code→ To change behavior, you refactor"><div></div></button></div></figure></div>
<p><strong>More granular (empowers the agent):</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Tools: read_file, write_file, move_file, list_directory, bash</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Prompt: "Organize the user's downloads folder. Analyze each file,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">        </span></span><span style="--0:#d6deeb;--1:#403f53">determine appropriate locations based on content and recency,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">        </span></span><span style="--0:#d6deeb;--1:#403f53">and move them there."</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Agent: Operates in a loop—reads files, makes judgments, moves things,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">       </span></span><span style="--0:#d6deeb;--1:#403f53">checks results—until the folder is organized.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">→ Agent makes the decisions</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">→ To change behavior, you edit the prompt</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="Tools: read_file, write_file, move_file, list_directory, bashPrompt: &#x22;Organize the user&#x27;s downloads folder. Analyze each file,        determine appropriate locations based on content and recency,        and move them there.&#x22;Agent: Operates in a loop—reads files, makes judgments, moves things,       checks results—until the folder is organized.→ Agent makes the decisions→ To change behavior, you edit the prompt"><div></div></button></div></figure></div>
<p><strong>The key shift:</strong> The agent is pursuing an outcome with judgment, not executing a choreographed sequence. It might encounter unexpected file types, adjust its approach, or ask clarifying questions. The loop continues until the outcome is achieved.</p>
<p>The more atomic your tools, the more flexibly the agent can use them. If you bundle decision logic into tools, you’ve moved judgment back into code.</p>
<p><strong>The test:</strong> To change how a feature behaves, do you edit prose or refactor code?</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="3-composability">3. Composability</h3><a class="sl-anchor-link" href="#3-composability"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “3. Composability”</span></a></div>
<p><strong>With atomic tools and parity, you can create new features just by writing new prompts.</strong></p>
<p>This is the payoff of the first two principles. When your tools are atomic and the agent can do anything users can do, new features are just new prompts.</p>
<p>Want a “weekly review” feature that summarizes activity and suggests priorities? That’s a prompt:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">"Review files modified this week. Summarize key changes. Based on</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">incomplete items and approaching deadlines, suggest three priorities</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">for next week."</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="&#x22;Review files modified this week. Summarize key changes. Based onincomplete items and approaching deadlines, suggest three prioritiesfor next week.&#x22;"><div></div></button></div></figure></div>
<p>The agent uses <code dir="auto">list_files</code>, <code dir="auto">read_file</code>, and its judgment to accomplish this. You didn’t write weekly-review code. You described an outcome, and the agent operates in a loop until it’s achieved.</p>
<p><strong>This works for developers and users.</strong> You can ship new features by adding prompts. Users can customize behavior by modifying prompts or creating their own. “When I say ‘file this,’ always move it to my Action folder and tag it urgent” becomes a user-level prompt that extends the application.</p>
<p><strong>The constraint:</strong> This only works if tools are atomic enough to be composed in ways you didn’t anticipate, and if the agent has parity with users. If tools encode too much logic, or the agent can’t access key capabilities, composition breaks down.</p>
<p><strong>The test:</strong> Can you add a new feature by writing a new prompt section, without adding new code?</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="4-emergent-capability">4. Emergent Capability</h3><a class="sl-anchor-link" href="#4-emergent-capability"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “4. Emergent Capability”</span></a></div>
<p><strong>The agent can accomplish things you didn’t explicitly design for.</strong></p>
<p>When tools are atomic, parity is maintained, and prompts are composable, users will ask the agent for things you never anticipated. And often, the agent can figure it out.</p>
<p><em>“Cross-reference my meeting notes with my task list and tell me what I’ve committed to but haven’t scheduled.”</em></p>
<p>You didn’t build a “commitment tracker” feature. But if the agent can read notes, read tasks, and reason about them—operating in a loop until it has an answer—it can accomplish this.</p>
<p><strong>This reveals latent demand.</strong> Instead of guessing what features users want, you observe what they’re asking the agent to do. When patterns emerge, you can optimize them with domain-specific tools or dedicated prompts. But you didn’t have to anticipate them—you discovered them.</p>
<p><strong>The flywheel:</strong></p>
<ol>
<li>Build with atomic tools and parity</li>
<li>Users ask for things you didn’t anticipate</li>
<li>Agent composes tools to accomplish them (or fails, revealing a gap)</li>
<li>You observe patterns in what’s being requested</li>
<li>Add domain tools or prompts to make common patterns efficient</li>
<li>Repeat</li>
</ol>
<p>This changes how you build products. You’re not trying to imagine every feature upfront. You’re creating a capable foundation and learning from what emerges.</p>
<p><strong>The test:</strong> Give the agent an open-ended request relevant to your domain. Can it figure out a reasonable approach, operating in a loop until it succeeds? If it just says “I don’t have a feature for that,” your architecture is too constrained.</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="5-improvement-over-time">5. Improvement Over Time</h3><a class="sl-anchor-link" href="#5-improvement-over-time"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “5. Improvement Over Time”</span></a></div>
<p><strong>Agent-native applications get better through accumulated context and prompt refinement.</strong></p>
<p>Unlike traditional software, agent-native applications can improve without shipping code:</p>
<p><strong>Accumulated context:</strong> The agent can maintain state across sessions—what exists, what the user has done, what worked, what didn’t. A <code dir="auto">context.md</code> file the agent reads and updates is layer one. More sophisticated approaches involve structured memory and learned preferences.</p>
<p><strong>Prompt refinement at multiple levels:</strong></p>
<ul>
<li><strong>Developer level:</strong> You ship updated prompts that change agent behavior for all users</li>
<li><strong>User level:</strong> Users customize prompts for their workflow</li>
<li><strong>Agent level:</strong> The agent modifies its own prompts based on feedback (advanced)</li>
</ul>
<p><strong>Self-modification (advanced):</strong> Agents that can edit their own prompts or even their own code. For production use cases, consider adding safety rails—approval gates, automatic checkpoints for rollback, health checks. This is where things are heading.</p>
<p>The improvement mechanisms are still being discovered. Context and prompt refinement are proven. Self-modification is emerging. What’s clear: the architecture supports getting better in ways traditional software doesn’t.</p>
<p><strong>The test:</strong> Does the application work better after a month of use than on day one, even without code changes?
&#x3C;/core_principles></p>
<intake>
## What aspect of agent-native architecture do you need help with?
<ol>
<li><strong>Design architecture</strong> - Plan a new agent-native system from scratch</li>
<li><strong>Files &#x26; workspace</strong> - Use files as the universal interface, shared workspace patterns</li>
<li><strong>Tool design</strong> - Build primitive tools, dynamic capability discovery, CRUD completeness</li>
<li><strong>Domain tools</strong> - Know when to add domain tools vs stay with primitives</li>
<li><strong>Execution patterns</strong> - Completion signals, partial completion, context limits</li>
<li><strong>System prompts</strong> - Define agent behavior in prompts, judgment criteria</li>
<li><strong>Context injection</strong> - Inject runtime app state into agent prompts</li>
<li><strong>Action parity</strong> - Ensure agents can do everything users can do</li>
<li><strong>Self-modification</strong> - Enable agents to safely evolve themselves</li>
<li><strong>Product design</strong> - Progressive disclosure, latent demand, approval patterns</li>
<li><strong>Mobile patterns</strong> - iOS storage, background execution, checkpoint/resume</li>
<li><strong>Testing</strong> - Test agent-native apps for capability and parity</li>
<li><strong>Refactoring</strong> - Make existing code more agent-native</li>
</ol>
<p><strong>Wait for response before proceeding.</strong>
</p>
<routing>
| Response | Action |
|----------|--------|
| 1, "design", "architecture", "plan" | Read [architecture-patterns.md](./references/architecture-patterns.md), then apply Architecture Checklist below |
| 2, "files", "workspace", "filesystem" | Read [files-universal-interface.md](./references/files-universal-interface.md) and [shared-workspace-architecture.md](./references/shared-workspace-architecture.md) |
| 3, "tool", "mcp", "primitive", "crud" | Read [mcp-tool-design.md](./references/mcp-tool-design.md) |
| 4, "domain tool", "when to add" | Read [from-primitives-to-domain-tools.md](./references/from-primitives-to-domain-tools.md) |
| 5, "execution", "completion", "loop" | Read [agent-execution-patterns.md](./references/agent-execution-patterns.md) |
| 6, "prompt", "system prompt", "behavior" | Read [system-prompt-design.md](./references/system-prompt-design.md) |
| 7, "context", "inject", "runtime", "dynamic" | Read [dynamic-context-injection.md](./references/dynamic-context-injection.md) |
| 8, "parity", "ui action", "capability map" | Read [action-parity-discipline.md](./references/action-parity-discipline.md) |
| 9, "self-modify", "evolve", "git" | Read [self-modification.md](./references/self-modification.md) |
| 10, "product", "progressive", "approval", "latent demand" | Read [product-implications.md](./references/product-implications.md) |
| 11, "mobile", "ios", "android", "background", "checkpoint" | Read [mobile-patterns.md](./references/mobile-patterns.md) |
| 12, "test", "testing", "verify", "validate" | Read [agent-native-testing.md](./references/agent-native-testing.md) |
| 13, "review", "refactor", "existing" | Read [refactoring-to-prompt-native.md](./references/refactoring-to-prompt-native.md) |
<p><strong>After reading the reference, apply those patterns to the user’s specific context.</strong>
</p>
<p>&#x3C;architecture_checklist></p>
<div class="sl-heading-wrapper level-h2"><h2 id="architecture-review-checklist">Architecture Review Checklist</h2><a class="sl-anchor-link" href="#architecture-review-checklist"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Architecture Review Checklist”</span></a></div>
<p>When designing an agent-native system, verify these <strong>before implementation</strong>:</p>
<div class="sl-heading-wrapper level-h3"><h3 id="core-principles-1">Core Principles</h3><a class="sl-anchor-link" href="#core-principles-1"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Core Principles”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <strong>Parity:</strong> Every UI action has a corresponding agent capability</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Granularity:</strong> Tools are primitives; features are prompt-defined outcomes</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Composability:</strong> New features can be added via prompts alone</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Emergent Capability:</strong> Agent can handle open-ended requests in your domain</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="tool-design">Tool Design</h3><a class="sl-anchor-link" href="#tool-design"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Tool Design”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <strong>Dynamic vs Static:</strong> For external APIs where agent should have full access, use Dynamic Capability Discovery</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>CRUD Completeness:</strong> Every entity has create, read, update, AND delete</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Primitives not Workflows:</strong> Tools enable capability, don’t encode business logic</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>API as Validator:</strong> Use <code dir="auto">z.string()</code> inputs when the API validates, not <code dir="auto">z.enum()</code></li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="files--workspace">Files &#x26; Workspace</h3><a class="sl-anchor-link" href="#files--workspace"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Files &#x26; Workspace”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <strong>Shared Workspace:</strong> Agent and user work in same data space</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>context.md Pattern:</strong> Agent reads/updates context file for accumulated knowledge</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>File Organization:</strong> Entity-scoped directories with consistent naming</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="agent-execution">Agent Execution</h3><a class="sl-anchor-link" href="#agent-execution"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Agent Execution”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <strong>Completion Signals:</strong> Agent has explicit <code dir="auto">complete_task</code> tool (not heuristic detection)</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Partial Completion:</strong> Multi-step tasks track progress for resume</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Context Limits:</strong> Designed for bounded context from the start</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="context-injection">Context Injection</h3><a class="sl-anchor-link" href="#context-injection"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Context Injection”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <strong>Available Resources:</strong> System prompt includes what exists (files, data, types)</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Available Capabilities:</strong> System prompt documents tools with user vocabulary</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Dynamic Context:</strong> Context refreshes for long sessions (or provide <code dir="auto">refresh_context</code> tool)</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="ui-integration">UI Integration</h3><a class="sl-anchor-link" href="#ui-integration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “UI Integration”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <strong>Agent → UI:</strong> Agent changes reflect in UI (shared service, file watching, or event bus)</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>No Silent Actions:</strong> Agent writes trigger UI updates immediately</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Capability Discovery:</strong> Users can learn what agent can do</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="mobile-if-applicable">Mobile (if applicable)</h3><a class="sl-anchor-link" href="#mobile-if-applicable"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Mobile (if applicable)”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <strong>Checkpoint/Resume:</strong> Handle iOS app suspension gracefully</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>iCloud Storage:</strong> iCloud-first with local fallback for multi-device sync</li>
<li class="task-list-item"><input type="checkbox" disabled> <strong>Cost Awareness:</strong> Model tier selection (Haiku/Sonnet/Opus)</li>
</ul>
<p><strong>When designing architecture, explicitly address each checkbox in your plan.</strong>
&#x3C;/architecture_checklist></p>
<p>&#x3C;quick_start></p>
<div class="sl-heading-wrapper level-h2"><h2 id="quick-start-build-an-agent-native-feature">Quick Start: Build an Agent-Native Feature</h2><a class="sl-anchor-link" href="#quick-start-build-an-agent-native-feature"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Quick Start: Build an Agent-Native Feature”</span></a></div>
<p><strong>Step 1: Define atomic tools</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">tools</span><span style="--0:#C792EA;--1:#8844AE"> =</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">read_file</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Read any file</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, { path: z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">() }, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">),</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">write_file</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Write any file</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, { path: z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">(), content: z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">() }, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">),</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">list_files</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">List directory</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, { path: z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">() }, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">),</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">complete_task</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Signal task completion</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, { summary: z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">() }, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">),</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">];</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="const tools = [  tool(&#x22;read_file&#x22;, &#x22;Read any file&#x22;, { path: z.string() }, ...),  tool(&#x22;write_file&#x22;, &#x22;Write any file&#x22;, { path: z.string(), content: z.string() }, ...),  tool(&#x22;list_files&#x22;, &#x22;List directory&#x22;, { path: z.string() }, ...),  tool(&#x22;complete_task&#x22;, &#x22;Signal task completion&#x22;, { summary: z.string() }, ...),];"><div></div></button></div></figure></div>
<p><strong>Step 2: Write behavior in the system prompt</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#82B1FF;--1:#3B61B0">## Your Responsibilities</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">When asked to organize content, you should:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> Read existing files to understand the structure</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> Analyze what organization makes sense</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> Create/move files using your tools</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> Use your judgment about layout and formatting</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">5.</span><span style="--0:#D6DEEB;--1:#403F53"> Call complete_task when you're done</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">You decide the structure. Make it good.</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="## Your ResponsibilitiesWhen asked to organize content, you should:1. Read existing files to understand the structure2. Analyze what organization makes sense3. Create/move files using your tools4. Use your judgment about layout and formatting5. Call complete_task when you&#x27;re doneYou decide the structure. Make it good."><div></div></button></div></figure></div>
<p><strong>Step 3: Let the agent work in a loop</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">result</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#D6DEEB;--1:#403F53">agent</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">prompt: </span><span style="--0:#D6DEEB;--1:#403F53">userMessage</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">tools: </span><span style="--0:#D6DEEB;--1:#403F53">tools</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">systemPrompt: </span><span style="--0:#D6DEEB;--1:#403F53">systemPrompt</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// Agent loops until it calls complete_task</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="const result = await agent.run({  prompt: userMessage,  tools: tools,  systemPrompt: systemPrompt,  // Agent loops until it calls complete_task});"><div></div></button></div></figure></div>
<p>&#x3C;/quick_start></p>
<p>&#x3C;reference_index></p>
<div class="sl-heading-wrapper level-h2"><h2 id="reference-files">Reference Files</h2><a class="sl-anchor-link" href="#reference-files"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Reference Files”</span></a></div>
<p>All references in <code dir="auto">references/</code>:</p>
<p><strong>Core Patterns:</strong></p>
<ul>
<li><a href="./references/architecture-patterns.md">architecture-patterns.md</a> - Event-driven, unified orchestrator, agent-to-UI</li>
<li><a href="./references/files-universal-interface.md">files-universal-interface.md</a> - Why files, organization patterns, context.md</li>
<li><a href="./references/mcp-tool-design.md">mcp-tool-design.md</a> - Tool design, dynamic capability discovery, CRUD</li>
<li><a href="./references/from-primitives-to-domain-tools.md">from-primitives-to-domain-tools.md</a> - When to add domain tools, graduating to code</li>
<li><a href="./references/agent-execution-patterns.md">agent-execution-patterns.md</a> - Completion signals, partial completion, context limits</li>
<li><a href="./references/system-prompt-design.md">system-prompt-design.md</a> - Features as prompts, judgment criteria</li>
</ul>
<p><strong>Agent-Native Disciplines:</strong></p>
<ul>
<li><a href="./references/dynamic-context-injection.md">dynamic-context-injection.md</a> - Runtime context, what to inject</li>
<li><a href="./references/action-parity-discipline.md">action-parity-discipline.md</a> - Capability mapping, parity workflow</li>
<li><a href="./references/shared-workspace-architecture.md">shared-workspace-architecture.md</a> - Shared data space, UI integration</li>
<li><a href="./references/product-implications.md">product-implications.md</a> - Progressive disclosure, latent demand, approval</li>
<li><a href="./references/agent-native-testing.md">agent-native-testing.md</a> - Testing outcomes, parity tests</li>
</ul>
<p><strong>Platform-Specific:</strong></p>
<ul>
<li><a href="./references/mobile-patterns.md">mobile-patterns.md</a> - iOS storage, checkpoint/resume, cost awareness</li>
<li><a href="./references/self-modification.md">self-modification.md</a> - Git-based evolution, guardrails</li>
<li><a href="./references/refactoring-to-prompt-native.md">refactoring-to-prompt-native.md</a> - Migrating existing code
&#x3C;/reference_index></li>
</ul>
<p>&#x3C;anti_patterns></p>
<div class="sl-heading-wrapper level-h2"><h2 id="anti-patterns">Anti-Patterns</h2><a class="sl-anchor-link" href="#anti-patterns"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Anti-Patterns”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="common-approaches-that-arent-fully-agent-native">Common Approaches That Aren’t Fully Agent-Native</h3><a class="sl-anchor-link" href="#common-approaches-that-arent-fully-agent-native"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Common Approaches That Aren’t Fully Agent-Native”</span></a></div>
<p>These aren’t necessarily wrong—they may be appropriate for your use case. But they’re worth recognizing as different from the architecture this document describes.</p>
<p><strong>Agent as router</strong> — The agent figures out what the user wants, then calls the right function. The agent’s intelligence is used to route, not to act. This can work, but you’re using a fraction of what agents can do.</p>
<p><strong>Build the app, then add agent</strong> — You build features the traditional way (as code), then expose them to an agent. The agent can only do what your features already do. You won’t get emergent capability.</p>
<p><strong>Request/response thinking</strong> — Agent gets input, does one thing, returns output. This misses the loop: agent gets an outcome to achieve, operates until it’s done, handles unexpected situations along the way.</p>
<p><strong>Defensive tool design</strong> — You over-constrain tool inputs because you’re used to defensive programming. Strict enums, validation at every layer. This is safe, but it prevents the agent from doing things you didn’t anticipate.</p>
<p><strong>Happy path in code, agent just executes</strong> — Traditional software handles edge cases in code—you write the logic for what happens when X goes wrong. Agent-native lets the agent handle edge cases with judgment. If your code handles all the edge cases, the agent is just a caller.</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="specific-anti-patterns">Specific Anti-Patterns</h3><a class="sl-anchor-link" href="#specific-anti-patterns"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Specific Anti-Patterns”</span></a></div>
<p><strong>THE CARDINAL SIN: Agent executes your code instead of figuring things out</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// WRONG - You wrote the workflow, agent just executes it</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">process_feedback</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D6DEEB">{ </span><span style="--0:#D7DBE0">message</span><span style="--0:#D6DEEB"> }</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">category</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#82AAFF;--1:#3B61B0">categorize</span><span style="--0:#D6DEEB;--1:#403F53">(message);      </span><span style="--0:#919F9F;--1:#5D6376">// Your code decides</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">priority</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#82AAFF;--1:#3B61B0">calculatePriority</span><span style="--0:#D6DEEB;--1:#403F53">(message); </span><span style="--0:#919F9F;--1:#5D6376">// Your code decides</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">store</span><span style="--0:#D6DEEB;--1:#403F53">(message, category, priority);   </span><span style="--0:#919F9F;--1:#5D6376">// Your code orchestrates</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (priority </span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">notify</span><span style="--0:#D6DEEB;--1:#403F53">();           </span><span style="--0:#919F9F;--1:#5D6376">// Your code decides</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// RIGHT - Agent figures out how to process feedback</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">tools: store_item, send_message  </span><span style="--0:#919F9F;--1:#5D6376">// Primitives</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">prompt: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Rate importance 1-5 based on actionability, store feedback, notify if >= 4</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="// WRONG - You wrote the workflow, agent just executes ittool(&#x22;process_feedback&#x22;, async ({ message }) => {  const category = categorize(message);      // Your code decides  const priority = calculatePriority(message); // Your code decides  await store(message, category, priority);   // Your code orchestrates  if (priority > 3) await notify();           // Your code decides});// RIGHT - Agent figures out how to process feedbacktools: store_item, send_message  // Primitivesprompt: &#x22;Rate importance 1-5 based on actionability, store feedback, notify if >= 4&#x22;"><div></div></button></div></figure></div>
<p><strong>Workflow-shaped tools</strong> — <code dir="auto">analyze_and_organize</code> bundles judgment into the tool. Break it into primitives and let the agent compose them.</p>
<p><strong>Context starvation</strong> — Agent doesn’t know what resources exist in the app.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">User: "Write something about Catherine the Great in my feed"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Agent: "What feed? I don't understand what system you're referring to."</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="User: &#x22;Write something about Catherine the Great in my feed&#x22;Agent: &#x22;What feed? I don&#x27;t understand what system you&#x27;re referring to.&#x22;"><div></div></button></div></figure></div>
<p>Fix: Inject available resources, capabilities, and vocabulary into system prompt.</p>
<p><strong>Orphan UI actions</strong> — User can do something through the UI that the agent can’t achieve. Fix: maintain parity.</p>
<p><strong>Silent actions</strong> — Agent changes state but UI doesn’t update. Fix: Use shared data stores with reactive binding, or file system observation.</p>
<p><strong>Heuristic completion detection</strong> — Detecting agent completion through heuristics (consecutive iterations without tool calls, checking for expected output files). This is fragile. Fix: Require agents to explicitly signal completion through a <code dir="auto">complete_task</code> tool.</p>
<p><strong>Static tool mapping for dynamic APIs</strong> — Building 50 tools for 50 API endpoints when a <code dir="auto">discover</code> + <code dir="auto">access</code> pattern would give more flexibility.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// WRONG - Every API type needs a hardcoded tool</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">read_steps</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">read_heart_rate</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">read_sleep</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// When glucose tracking is added... code change required</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// RIGHT - Dynamic capability discovery</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">list_available_types</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">)  </span><span style="--0:#919F9F;--1:#5D6376">// Discover what's available</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">read_health_data</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, { dataType: z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">() }, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">)  </span><span style="--0:#919F9F;--1:#5D6376">// Access any type</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="// WRONG - Every API type needs a hardcoded tooltool(&#x22;read_steps&#x22;, ...)tool(&#x22;read_heart_rate&#x22;, ...)tool(&#x22;read_sleep&#x22;, ...)// When glucose tracking is added... code change required// RIGHT - Dynamic capability discoverytool(&#x22;list_available_types&#x22;, ...)  // Discover what&#x27;s availabletool(&#x22;read_health_data&#x22;, { dataType: z.string() }, ...)  // Access any type"><div></div></button></div></figure></div>
<p><strong>Incomplete CRUD</strong> — Agent can create but not update or delete.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// User: "Delete that journal entry"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// Agent: "I don't have a tool for that"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">tool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">create_journal_entry</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">)  </span><span style="--0:#919F9F;--1:#5D6376">// Missing: update, delete</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="// User: &#x22;Delete that journal entry&#x22;// Agent: &#x22;I don&#x27;t have a tool for that&#x22;tool(&#x22;create_journal_entry&#x22;, ...)  // Missing: update, delete"><div></div></button></div></figure></div>
<p>Fix: Every entity needs full CRUD.</p>
<p><strong>Sandbox isolation</strong> — Agent works in separate data space from user.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Documents/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">├── user_files/        ← User's space</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">└── agent_output/      ← Agent's space (isolated)</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="Documents/├── user_files/        ← User&#x27;s space└── agent_output/      ← Agent&#x27;s space (isolated)"><div></div></button></div></figure></div>
<p>Fix: Use shared workspace where both operate on same files.</p>
<p><strong>Gates without reason</strong> — Domain tool is the only way to do something, and you didn’t intend to restrict access. The default is open. Keep primitives available unless there’s a specific reason to gate.</p>
<p><strong>Artificial capability limits</strong> — Restricting what the agent can do out of vague safety concerns rather than specific risks. Be thoughtful about restricting capabilities. The agent should generally be able to do what users can do.
&#x3C;/anti_patterns></p>
<p>&#x3C;success_criteria></p>
<div class="sl-heading-wrapper level-h2"><h2 id="success-criteria">Success Criteria</h2><a class="sl-anchor-link" href="#success-criteria"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Success Criteria”</span></a></div>
<p>You’ve built an agent-native application when:</p>
<div class="sl-heading-wrapper level-h3"><h3 id="architecture">Architecture</h3><a class="sl-anchor-link" href="#architecture"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Architecture”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> The agent can achieve anything users can achieve through the UI (parity)</li>
<li class="task-list-item"><input type="checkbox" disabled> Tools are atomic primitives; domain tools are shortcuts, not gates (granularity)</li>
<li class="task-list-item"><input type="checkbox" disabled> New features can be added by writing new prompts (composability)</li>
<li class="task-list-item"><input type="checkbox" disabled> The agent can accomplish tasks you didn’t explicitly design for (emergent capability)</li>
<li class="task-list-item"><input type="checkbox" disabled> Changing behavior means editing prompts, not refactoring code</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="implementation">Implementation</h3><a class="sl-anchor-link" href="#implementation"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Implementation”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> System prompt includes dynamic context about app state</li>
<li class="task-list-item"><input type="checkbox" disabled> Every UI action has a corresponding agent tool (action parity)</li>
<li class="task-list-item"><input type="checkbox" disabled> Agent tools are documented in system prompt with user vocabulary</li>
<li class="task-list-item"><input type="checkbox" disabled> Agent and user work in the same data space (shared workspace)</li>
<li class="task-list-item"><input type="checkbox" disabled> Agent actions are immediately reflected in the UI</li>
<li class="task-list-item"><input type="checkbox" disabled> Every entity has full CRUD (Create, Read, Update, Delete)</li>
<li class="task-list-item"><input type="checkbox" disabled> Agents explicitly signal completion (no heuristic detection)</li>
<li class="task-list-item"><input type="checkbox" disabled> context.md or equivalent for accumulated knowledge</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="product">Product</h3><a class="sl-anchor-link" href="#product"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Product”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Simple requests work immediately with no learning curve</li>
<li class="task-list-item"><input type="checkbox" disabled> Power users can push the system in unexpected directions</li>
<li class="task-list-item"><input type="checkbox" disabled> You’re learning what users want by observing what they ask the agent to do</li>
<li class="task-list-item"><input type="checkbox" disabled> Approval requirements match stakes and reversibility</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="mobile-if-applicable-1">Mobile (if applicable)</h3><a class="sl-anchor-link" href="#mobile-if-applicable-1"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “Mobile (if applicable)”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Checkpoint/resume handles app interruption</li>
<li class="task-list-item"><input type="checkbox" disabled> iCloud-first storage with local fallback</li>
<li class="task-list-item"><input type="checkbox" disabled> Background execution uses available time wisely</li>
<li class="task-list-item"><input type="checkbox" disabled> Model tier matched to task complexity</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="the-ultimate-test">The Ultimate Test</h3><a class="sl-anchor-link" href="#the-ultimate-test"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only" data-pagefind-ignore="">Section titled “The Ultimate Test”</span></a></div>
<p><strong>Describe an outcome to the agent that’s within your application’s domain but that you didn’t build a specific feature for.</strong></p>
<p>Can it figure out how to accomplish it, operating in a loop until it succeeds?</p>
<p>If yes, you’ve built something agent-native.</p>
<p>If it says “I don’t have a feature for that”—your architecture is still too constrained.
&#x3C;/success_criteria></p></routing></intake> </div> <footer class="sl-flex astro-6hs6m4fg"> <div class="meta sl-flex astro-6hs6m4fg">   </div> <div class="pagination-links print:hidden astro-xgqntnr4" dir="ltr"> <a href="/systematic/reference/skills/agent-browser/" rel="prev" class="astro-xgqntnr4"> <svg aria-hidden="true" class="astro-xgqntnr4 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg> <span class="astro-xgqntnr4"> Previous <br class="astro-xgqntnr4"> <span class="link-title astro-xgqntnr4">agent-browser</span> </span> </a> <a href="/systematic/reference/skills/brainstorming/" rel="next" class="astro-xgqntnr4"> <svg aria-hidden="true" class="astro-xgqntnr4 astro-alwspyvt" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> <span class="astro-xgqntnr4"> Next <br class="astro-xgqntnr4"> <span class="link-title astro-xgqntnr4">brainstorming</span> </span> </a> </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>